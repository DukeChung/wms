@using NBK.WMS.Portal.Helpers

@{
    ViewBag.Title = "编辑组装件";
}

@Html.Breadcrumb("基础资料管理", "编辑组装件")
@section Styles {
    @Styles.Render("~/Content/plugins/iCheck/iCheckStyles")
}

<div class="wrapper wrapper-content animated fadeInRight ecommerce">
    <div id="EditComponent" class="ibox-content m-b-sm border-bottom">

        <form id="ComponentForm" class="form-horizontal">
            <h4 class="row" style="margin-left:8px;">成品信息</h4>
            <div class="ibox-content m-b-sm border-bottom">
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="col-sm-4 control-label">
                            商品编号
                        </label>
                        <div class="col-sm-8">
                            <input id="SkuCode" name="SkuCode" v-model="SkuCode" type="text" class="form-control required">
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label class="col-sm-4 control-label">
                            商品名称
                        </label>
                        <div class="col-sm-8">
                            <input id="SkuName" name="SkuName" v-model="SkuName" type="text" class="form-control required">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="col-sm-4 control-label">
                            商品UPC
                        </label>
                        <div class="col-sm-8">
                            <input id="UPC" name="UPC" v-model="UPC" type="text" class="form-control required">
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label class="col-sm-4 control-label">
                            商品描述
                        </label>
                        <div class="col-sm-8">
                            <input id="SkuDescr" name="SkuDescr" v-model="SkuDescr" type="text" class="form-control required">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="col-sm-4 control-label">
                            加工耗时
                        </label>
                        <div class="col-sm-8">
                            <input id="TimeConsuming" name="TimeConsuming" v-model="TimeConsuming" type="text" class="form-control required">
                        </div>
                    </div>
                    <div class="col-sm-6">

                    </div>
                </div>
            </div>
            <h4 class="row" style="margin-left:8px;">原材料信息</h4>
            <div class="ibox-content m-b-sm border-bottom">
                <table id="gvComponentDetail" class="table table-striped table-bordered table-hover dataTables-example">
                    <thead>
                        <tr>
                            <th style="text-align:center;vertical-align:middle;padding:0px;width:20px"><input type="checkbox" id="ckbAll" onclick="gvCheckAll(this);" /></th>
                            <th>商品编号</th>
                            <th>商品名称</th>
                            <th>商品UPC</th>
                            <th>商品描述</th>
                            <th>数量</th>
                            <th>损耗数量</th>
                            <th>单位</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="item in ComponentDetailDtoList">
                            <td style="text-align:center;vertical-align:middle;padding:0px;width:15px"><input type="checkbox" v-bind:value="item.SysId" /></td>
                            <td v-text="item.SkuCode"></td>
                            <td v-text="item.SkuName"></td>
                            <td v-text="item.UPC"></td>
                            <td v-text="item.SkuDescr"></td>
                            <td v-text="item.Qty"></td>
                            <td v-text="item.LossQty"></td>
                            <td v-text="item.UOMCode"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="text-right tooltip-demo">
                <a class="btn btn-white btn-sm" id="btnReturn" onclick="Return();"><i class="fa fa-times"></i> 返回</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/plugins/iCheck")
    <script src="~/Scripts/Utility/Common.js"></script>
    <script>
        var component = {
            viewModel: {},
            init: function () {
                var _self = this;

                //获取组装件数据
                $.ajax({
                    url: "@Url.Action("GetComponentById", "Component")",
                    data: { sysId: "@ViewBag.SysId" },
                    type: "POST",
                    success: function (data) {
                        debugger;
                        component.initVue(data);
                    },
                    error: function (data) {
                        msgErro(data.message);
                    }
                });

            },
            initVue: function (data) {
                component.viewModel = new Vue({
                    el: "#EditComponent",
                    data: data,
                    methods: {

                    }
                });
            }
        }

        $(function () {
            component.init();
        });

        function Return() {
            window.location.href = "/Component/ComponentList";
        }
    </script>
}









